<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Spyder2000 UI Mockup v5 - Flat Silkscreen Labels</title>

  <style>
    /* Load authentic 7-segment display font from CDN */
    @import url('https://cdn.jsdelivr.net/npm/dseg@latest/css/dseg.min.css');

    /* CRITICAL: WebView constraints - NO viewport units */
    html, body {
      height: 100%;  /* REQUIRED - replaces viewport units */
      margin: 0;
      padding: 0;
    }

    *, *::before, *::after {
      box-sizing: border-box;
    }

    body {
      /* Native application feel */
      user-select: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      cursor: default;
      overflow: hidden;

      /* Centering for preview */
      display: flex;
      align-items: center;
      justify-content: center;
      background: #000;
      font-family: Arial, sans-serif;
    }

    /* Fixed-size preview frame with 5px rounded corners (v4) */
    .plugin-frame {
      width: 450px;
      height: 300px;
      border: 2px solid #444;
      border-radius: 5px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.5);
      overflow: hidden;
      position: relative;
    }

    /* Plugin UI container with 5px rounded corners and BEVELED EDGES */
    .container {
      width: 100%;
      height: 100%;
      position: relative;
      border-radius: 5px;
      overflow: hidden;

      /* v4: Glossy polished Ferrari Red chassis */
      /* Multiple gradient layers for highly polished aluminum look */
      background:
        /* Top gloss layer (specular highlight) */
        radial-gradient(
          circle at 30% 30%,
          rgba(255, 255, 255, 0.35) 0%,
          rgba(255, 107, 107, 0.2) 15%,
          transparent 40%
        ),
        /* Mid-tone gradient (Ferrari Red base) */
        radial-gradient(
          ellipse at 50% 33%,
          #FF1744 0%,
          #DC143C 50%,
          #8B0000 100%
        );

      /* v4: Hammond 1590BB style beveled edges */
      box-shadow:
        /* Outer bevel (top-left light) */
        inset 0 0 0 1px rgba(255, 255, 255, 0.15),
        inset 8px 8px 12px rgba(255, 107, 107, 0.4),
        inset -8px -8px 12px rgba(90, 0, 0, 0.6),
        /* Mid bevel layer */
        inset 4px 4px 8px rgba(255, 107, 107, 0.25),
        inset -4px -4px 8px rgba(90, 0, 0, 0.4),
        /* Inner bevel (closest to center) */
        inset 2px 2px 4px rgba(255, 107, 107, 0.15),
        inset -2px -2px 4px rgba(90, 0, 0, 0.3),
        /* v4: Additional depth shadows for glossy finish */
        inset 0 0 20px rgba(0, 0, 0, 0.2),
        /* Outer depth shadow (3D lift) */
        0 4px 16px rgba(0, 0, 0, 0.7),
        /* v4: Extra outer glow for polished effect */
        0 8px 24px rgba(220, 20, 60, 0.3);
    }

    /* Additional bevel detail using pseudo-elements */
    .container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 8px;
      background: linear-gradient(
        to bottom,
        rgba(255, 107, 107, 0.5) 0%,
        rgba(255, 107, 107, 0.2) 50%,
        transparent 100%
      );
      border-radius: 5px 5px 0 0;
      pointer-events: none;
      z-index: 1;
    }

    .container::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 8px;
      background: linear-gradient(
        to top,
        rgba(90, 0, 0, 0.6) 0%,
        rgba(90, 0, 0, 0.3) 50%,
        transparent 100%
      );
      border-radius: 0 0 5px 5px;
      pointer-events: none;
      z-index: 1;
    }

    /* v4: Enhanced gloss overlay for polished chassis */
    .gloss-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 50%;
      background:
        /* Primary specular highlight */
        radial-gradient(
          circle at 25% 25%,
          rgba(255, 255, 255, 0.4) 0%,
          rgba(255, 255, 255, 0.2) 20%,
          rgba(255, 255, 255, 0.05) 40%,
          transparent 60%
        ),
        /* Secondary diffuse highlight */
        linear-gradient(
          to bottom,
          rgba(255, 255, 255, 0.25) 0%,
          rgba(255, 255, 255, 0.1) 50%,
          rgba(255, 255, 255, 0) 100%
        );
      pointer-events: none;
      border-radius: 5px 5px 0 0;
      z-index: 2;
    }

    /* NEW v5: Plugin name - FLAT silkscreen (NO text-shadow) */
    .plugin-name {
      position: absolute;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      font-family: 'Arial Black', sans-serif;
      font-size: 24px;
      font-weight: bold;
      color: #ffffff;
      /* REMOVED v5: text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8); */
      /* Clean flat silkscreen appearance like real pedal */
      letter-spacing: 3px;
      z-index: 3;
    }

    /* Knob container */
    .knob-container {
      position: absolute;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
      z-index: 3;
    }

    /* v4: Knob wrapper (holds rotating body + stationary shine) */
    .knob {
      width: 95px;
      height: 95px;
      position: relative;
      cursor: pointer;
    }

    /* v4: Rotating knob body (base + texture + indicator rotate together) */
    .knob-body {
      width: 100%;
      height: 100%;
      position: absolute;
      top: 0;
      left: 0;
      transform-origin: center center;
      transition: transform 50ms;
      z-index: 1;
    }

    /* Davies 1510 Knob base (rotates with body) */
    .knob-bg {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      background: #000000;

      /* Black polished knob with subtle gradient */
      background: radial-gradient(
        circle at 30% 30%,
        #333333 0%,
        #1a1a1a 30%,
        #000000 60%,
        #000000 100%
      );

      /* Enhanced shadow for depth */
      box-shadow:
        inset -4px -4px 12px rgba(0, 0, 0, 0.9),
        inset 4px 4px 10px rgba(100, 100, 100, 0.4),
        0 6px 12px rgba(0, 0, 0, 0.6);

      position: relative;
    }

    /* Davies 1510 cylindrical texture (rotates with knob) */
    .knob-texture {
      position: absolute;
      width: 75%;
      height: 75%;
      top: 12.5%;
      left: 12.5%;
      border-radius: 50%;
      background: repeating-conic-gradient(
        from 0deg,
        #0a0a0a 0deg 1.5deg,
        #1a1a1a 1.5deg 3deg
      );
      opacity: 0.6;
    }

    /* Davies 1510 white marker (rotates with knob) */
    .knob-indicator {
      position: absolute;
      width: 3px;
      height: 32px;
      background: #ffffff;
      top: 6px;
      left: 50%;
      transform: translateX(-50%);
      border-radius: 2px;
      box-shadow:
        0 0 4px rgba(255, 255, 255, 0.8),
        0 3px 6px rgba(0, 0, 0, 0.6);
    }

    /* v4: Stationary knob shine (does NOT rotate) */
    .knob-shine {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border-radius: 50%;
      pointer-events: none;  /* Don't block clicks */
      z-index: 2;  /* Above rotating body */

      /* Glossy highlight from top-left (STAYS FIXED) */
      background: radial-gradient(
        circle at 30% 30%,
        rgba(255, 255, 255, 0.5) 0%,
        rgba(255, 255, 255, 0.25) 20%,
        rgba(255, 255, 255, 0.1) 35%,
        transparent 50%
      );
    }

    /* NEW v5: Knob label - FLAT silkscreen (NO text-shadow) */
    .knob-label {
      font-size: 14px;
      font-weight: bold;
      color: #ffffff;
      /* REMOVED v5: text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.8); */
      /* Clean flat silkscreen appearance like real pedal */
      letter-spacing: 1px;
    }

    /* Authentic 7-segment display (shadows retained - simulates glowing LEDs) */
    .seven-segment-display {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      width: 140px;
      height: 40px;
      background: #000000;
      border: 2px solid #333;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 3;

      /* Actual 7-segment font (DSEG7 Classic) */
      font-family: 'DSEG7 Classic', 'DSEG7', 'Digital-7', 'Segment7', 'Courier New', monospace;
      font-size: 22px;
      font-weight: bold;
      color: #FF3333;

      /* Multiple text-shadow layers for authentic LED glow effect */
      /* RETAINED v5: This simulates actual glowing LEDs, not silkscreen text */
      text-shadow:
        0 0 5px #ff0000,
        0 0 10px #ff0000,
        0 0 15px #ff0000,
        0 0 20px #ff3333,
        0 0 30px #ff3333,
        0 0 40px #ff3333;

      letter-spacing: 3px;
      box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
    }

    /* Debug monitor (test HTML only) */
    .debug-monitor {
      position: fixed;
      bottom: 10px;
      right: 10px;
      background: rgba(0, 0, 0, 0.85);
      color: #0f0;
      font-family: 'Courier New', monospace;
      font-size: 11px;
      padding: 8px 12px;
      border: 1px solid #333;
      border-radius: 4px;
      min-width: 150px;
      pointer-events: none;
      z-index: 10000;
    }

    .debug-label {
      color: #666;
      font-size: 9px;
      margin-bottom: 4px;
      letter-spacing: 1px;
    }

    .debug-param {
      font-weight: bold;
      color: #0f0;
    }

    .debug-value {
      color: #fff;
      margin-top: 2px;
    }

    .debug-normalized {
      color: #888;
      font-size: 10px;
    }
  </style>
</head>
<body>
  <!-- Fixed-size plugin frame with 5px rounded corners (450×300) -->
  <div class="plugin-frame">
    <div class="container">
      <!-- Enhanced gloss overlay for polished chassis -->
      <div class="gloss-overlay"></div>

      <!-- Plugin name (v5: FLAT silkscreen, no shadow) -->
      <div class="plugin-name">SPYDER 2000</div>

      <!-- v4: Knobs with STATIONARY SHINE -->
      <!-- Gain knob -->
      <div class="knob-container" style="left: 57px; top: 60px;">
        <div class="knob" id="gain-knob" data-param="gain" data-value="5.0" data-min="0" data-max="10">
          <!-- Rotating body (knob base + texture + indicator) -->
          <div class="knob-body">
            <div class="knob-bg">
              <div class="knob-texture"></div>
              <div class="knob-indicator"></div>
            </div>
          </div>
          <!-- STATIONARY shine (does NOT rotate) -->
          <div class="knob-shine"></div>
        </div>
        <!-- v5: FLAT label (no shadow) -->
        <div class="knob-label">GAIN</div>
      </div>

      <!-- Tone knob -->
      <div class="knob-container" style="left: 177px; top: 60px;">
        <div class="knob" id="tone-knob" data-param="tone" data-value="5.0" data-min="0" data-max="10">
          <!-- Rotating body -->
          <div class="knob-body">
            <div class="knob-bg">
              <div class="knob-texture"></div>
              <div class="knob-indicator"></div>
            </div>
          </div>
          <!-- STATIONARY shine -->
          <div class="knob-shine"></div>
        </div>
        <!-- v5: FLAT label (no shadow) -->
        <div class="knob-label">TONE</div>
      </div>

      <!-- Level knob -->
      <div class="knob-container" style="left: 297px; top: 60px;">
        <div class="knob" id="level-knob" data-param="level" data-value="8.0" data-min="0" data-max="10">
          <!-- Rotating body -->
          <div class="knob-body">
            <div class="knob-bg">
              <div class="knob-texture"></div>
              <div class="knob-indicator"></div>
            </div>
          </div>
          <!-- STATIONARY shine -->
          <div class="knob-shine"></div>
        </div>
        <!-- v5: FLAT label (no shadow) -->
        <div class="knob-label">LEVEL</div>
      </div>

      <!-- Authentic 7-segment display with DSEG7 font (LED glow shadows retained) -->
      <div class="seven-segment-display" id="display">INSANE</div>
    </div>
  </div>

  <!-- Debug parameter monitor -->
  <div class="debug-monitor">
    <div class="debug-label">PARAMETER MONITOR</div>
    <div class="debug-param" id="debugParam">—</div>
    <div class="debug-value" id="debugValue">—</div>
    <div class="debug-normalized" id="debugNormalized">—</div>
  </div>

  <script>
    // Mock JUCE backend for browser testing
    window.Juce = {
      getSliderState: (id) => ({
        normalisedValue: 0.5,
        valueChangedEvent: {
          addListener: (fn) => console.log(`Listener added for ${id}`)
        },
        setNormalisedValue: (value) => {
          console.log(`${id} set to ${value}`);
        }
      })
    };

    // Disable context menu (REQUIRED)
    document.addEventListener("contextmenu", (e) => {
      e.preventDefault();
      return false;
    });

    // Disable default drag behaviors
    document.addEventListener("dragstart", (e) => {
      e.preventDefault();
    });

    // Knob interaction state
    let activeKnob = null;
    let startY = 0;
    let startValue = 0;
    let displayTimeout = null;

    // Initialize knobs
    const knobs = document.querySelectorAll('.knob');
    knobs.forEach(knob => {
      const value = parseFloat(knob.dataset.value);
      const min = parseFloat(knob.dataset.min);
      const max = parseFloat(knob.dataset.max);
      updateKnobRotation(knob, value, min, max);
    });

    // Mouse down - start dragging
    document.addEventListener('mousedown', (e) => {
      const knob = e.target.closest('.knob');
      if (!knob) return;

      activeKnob = knob;
      startY = e.clientY;
      startValue = parseFloat(knob.dataset.value);
      e.preventDefault();
    });

    // Mouse move - update knob value
    document.addEventListener('mousemove', (e) => {
      if (!activeKnob) return;

      const deltaY = startY - e.clientY;  // Inverted: up = increase
      const min = parseFloat(activeKnob.dataset.min);
      const max = parseFloat(activeKnob.dataset.max);
      const range = max - min;

      // 200px drag = full range
      const sensitivity = range / 200;
      let newValue = startValue + (deltaY * sensitivity);

      // Clamp to range
      newValue = Math.max(min, Math.min(max, newValue));

      // Update knob
      activeKnob.dataset.value = newValue.toFixed(1);
      updateKnobRotation(activeKnob, newValue, min, max);

      // Update display
      const paramId = activeKnob.dataset.param.toUpperCase();
      const display = document.getElementById('display');
      display.textContent = `${paramId} ${newValue.toFixed(1)}`;

      // Update debug monitor
      updateDebugMonitor(paramId, newValue, (newValue - min) / range);

      // Reset display timeout
      clearTimeout(displayTimeout);
      displayTimeout = setTimeout(() => {
        display.textContent = 'INSANE';
        document.getElementById('debugParam').textContent = '—';
        document.getElementById('debugValue').textContent = '—';
        document.getElementById('debugNormalized').textContent = '—';
      }, 2000);

      e.preventDefault();
    });

    // Mouse up - stop dragging
    document.addEventListener('mouseup', () => {
      activeKnob = null;
    });

    // v4: Rotate only .knob-body (shine stays stationary)
    function updateKnobRotation(knob, value, min, max) {
      const normalized = (value - min) / (max - min);  // 0 to 1
      const degrees = -135 + (normalized * 270);       // -135° to +135°

      // Apply rotation ONLY to .knob-body (not .knob-shine)
      const knobBody = knob.querySelector('.knob-body');
      knobBody.style.transform = `rotate(${degrees}deg)`;

      // .knob-shine has NO transform - stays stationary!
    }

    // Update debug monitor
    function updateDebugMonitor(paramId, value, normalizedValue) {
      document.getElementById('debugParam').textContent = paramId;
      document.getElementById('debugValue').textContent = value.toFixed(1);
      document.getElementById('debugNormalized').textContent = `${(normalizedValue * 100).toFixed(1)}%`;
    }

    console.log('Spyder2000 UI Mockup v5 loaded');
    console.log('NEW v5 refinement:');
    console.log('  - Flat silkscreen labels (removed text-shadow from plugin name and parameter labels)');
    console.log('  - Shadows retained ONLY on 3D elements (knobs, chassis bevels, display LED glow)');
    console.log('  - Authentic pedal aesthetics (flat silkscreen text like real hardware)');
    console.log('Preserved from v4:');
    console.log('  - Corner bevel: 5px (tighter, more precise)');
    console.log('  - Stationary knob shine (separate layer, doesn\'t rotate)');
    console.log('  - Glossy polished red chassis (matches knob shine quality)');
    console.log('Controls: 3 knobs (gain, tone, level)');
    console.log('Drag knobs vertically to adjust values');
    console.log('Display shows "INSANE" when idle, parameter values when adjusting');
  </script>
</body>
</html>
