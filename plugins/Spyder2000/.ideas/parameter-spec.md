# Parameter Specification: Spyder2000

**CRITICAL CONTRACT:** This specification is immutable during implementation (Stages 1-3).

**Generated by:** UI mockup finalization (ui-mockup skill, v1)
**Generated date:** 2025-11-17
**Status:** Locked
**Source:** v1-ui.yaml + parameter-spec-draft.md

DO NOT modify this file - it is the contract for Stage 1-3 implementation.

## Total Parameter Count

**Total:** 3 parameters

## Parameter Definitions

### gain
- **ID:** gain
- **Type:** Float
- **Range:** 0.0 to 10.0
- **Default:** 5.0
- **Unit:** (unitless, maps to 3-40dB internally)
- **Skew Factor:** linear
- **UI Control:** Rotary knob, left position
- **DSP Mapping:** Drive amount controlling pre-clipping filter emphasis and nonlinear section intensity
- **DSP Details:** Low settings (1-4) = boost mode for pushing already dirty amps. High settings (6-10) = distortion mode for clean amps. Maps to 3dB at gain=0, 40dB at gain=10 via formula: `driveGain = pow(10.0, (3.0 + gainValue * 3.7) / 20.0)`

### tone
- **ID:** tone
- **Type:** Float
- **Range:** 0.0 to 10.0
- **Default:** 5.0
- **Unit:** (unitless, tilt filter -12dB to +12dB @ 680Hz)
- **Skew Factor:** linear
- **UI Control:** Rotary knob, center position
- **DSP Mapping:** Tilt filter controlling frequency balance
- **DSP Details:** Two shelves @ 680Hz pivot. Low values darken tone (cut highs/boost lows), high values brighten tone (boost highs/cut lows). Center frequency at 680Hz. Low shelf gain: `(5.0 - toneValue) * 2.4` dB, High shelf gain: `(toneValue - 5.0) * 2.4` dB

### level
- **ID:** level
- **Type:** Float
- **Range:** 0.0 to 10.0
- **Default:** 8.0
- **Unit:** (unitless, -∞ to 0dB output)
- **Skew Factor:** linear
- **UI Control:** Rotary knob, right position
- **DSP Mapping:** Output level control providing makeup gain after clipping stage
- **DSP Details:** Assumes nonlinear section clips at ±1. Full range from mute to unity gain. Formula: `outputGain = (levelValue < 0.01) ? 0.0 : pow(10.0, (levelValue - 10.0) * 6.0 / 20.0)`. 5ms smoothing to avoid clicks.

## Implementation Notes

- All three parameters are continuous (Float type)
- All parameters use linear scaling (no skew)
- All parameters implemented as rotary knobs in WebView UI
- Parameter IDs are lowercase (gain, tone, level)
- UI displays parameter values 0.0-10.0 with 1 decimal place
- DSP uses these values for internal gain calculations (3-40dB drive, ±12dB tilt, -∞ to 0dB output)

## Stage References

- **Stage 1 (Foundation + Shell):** Implement all 3 parameters in APVTS with exact IDs, ranges, defaults
- **Stage 2 (DSP):** Connect parameters to adaptive filter, waveshaper, tilt filter, output gain
- **Stage 3 (GUI):** Bind WebView rotary knobs to parameters using WebSliderRelay + WebSliderParameterAttachment

## Consistency Validation

This specification is consistent with:
- v1-ui.yaml controls section (3 knobs, exact ranges/defaults)
- parameter-spec-draft.md (same parameters, confirmed mapping)
- creative-brief.md signal flow (gain → waveshaper → tone → level)
